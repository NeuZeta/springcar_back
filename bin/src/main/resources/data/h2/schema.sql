/*
 * http://localhost:8080/h2-console
 * 
 * JDBC URL: jdbc:h2:mem:testdb
 * 
 */

DROP TABLE SECUENCIAS 			IF EXISTS;
DROP TABLE CLIENTS 				IF EXISTS;
DROP TABLE OFFICES				IF EXISTS;
DROP TABLE RESERVATIONS_EXTRAS  IF EXISTS;
DROP TABLE EXTRAS				IF EXISTS;
DROP TABLE RESERVATIONS			IF EXISTS;
DROP TABLE CARS					IF EXISTS;
DROP TABLE CATEGORIES			IF EXISTS;

CREATE TABLE SECUENCIAS (
	SEQ_NAME								VARCHAR(100)	NOT NULL,
	SEQ_NUMBER								BIGINT			NOT NULL
);

CREATE TABLE CLIENTS (
	ID										BIGINT			NOT NULL,
	NOMBRE									VARCHAR(50)		NOT NULL,
	APELLIDOS								VARCHAR(50)		NOT NULL,
	ID_NUMBER								VARCHAR(50)		NOT NULL,
	ADDRESS									VARCHAR(50)		NOT NULL,
	ZIP_CODE								VARCHAR(20)		NOT NULL,
	CITY									VARCHAR(50)		NOT NULL,
	COUNTRY									VARCHAR(50)		NOT NULL,
	TELEFONO								VARCHAR(20)		NOT NULL,
	EMAIL									VARCHAR(50)		NOT NULL,
	USER_NAME								VARCHAR(50)		NOT NULL,
	PASSWORD								VARCHAR(50)		NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE OFFICES (
	ID										BIGINT			NOT NULL,
	NOMBRE									VARCHAR(50)		NOT NULL,
	ADDRESS									VARCHAR(50)		NOT NULL,
	ZIP_CODE								VARCHAR(20)		NOT NULL,
	CITY									VARCHAR(50)		NOT NULL,
	COUNTRY									VARCHAR(50)		NOT NULL,
	TELEFONO								VARCHAR(20)		NOT NULL,
	EMAIL									VARCHAR(50)		NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE CATEGORIES (
	ID										BIGINT			NOT NULL,
	NAME									VARCHAR(100)	NOT NULL,
	BASE_INSURANCE_PRICE					DOUBLE			NOT NULL,
	TOP_INSURANCE_PRICE						DOUBLE			NOT NULL,
	TOP_INSURANCE_GLASS_PROTECTION_PRICE	DOUBLE 			NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE CARS (
	ID										BIGINT			NOT NULL,
	MODEL									VARCHAR(50)		NOT NULL,
	ID_OFFICE								BIGINT			NOT NULL,
	ID_CATEGORY								BIGINT			NOT NULL,
	TRANSMISSION							VARCHAR(50)		NOT NULL,
	AIR_ACONDITIONED						BOOLEAN			NOT NULL,
	NUMBER_OF_SEATS							INT				NOT NULL,
	NUMBER_OF_DOORS							INT				NOT NULL,
	SUITCASES_CAPACITY						INT				NOT NULL,
	PHOTO									VARCHAR(100)	NOT NULL,
	BASE_PRICE								DECIMAL(15,2)	NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_OFFICE) REFERENCES OFFICES (ID),
	FOREIGN KEY (ID_CATEGORY) REFERENCES CATEGORIES (ID)
);

CREATE TABLE RESERVATIONS (
	ID										BIGINT			NOT NULL,
	RESERVATION_DATE						TIMESTAMP		NOT NULL,
	PICKUP_DATE								TIMESTAMP		NOT NULL,
	DROPOFF_DATE							TIMESTAMP		NOT NULL,
	ID_CAR									BIGINT			NOT NULL,          
	ID_CLIENT								BIGINT			NOT NULL,
	INSURANCE_TYPE							VARCHAR(10)		NOT NULL,
	TIRE_GLASS_PROTECTION					BOOLEAN			NOT NULL,
	PRICE									DOUBLE			NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_CAR) REFERENCES CARS(ID),
	FOREIGN KEY (ID_CLIENT) REFERENCES CLIENTS(ID)
	
);

CREATE TABLE EXTRAS (
	ID										BIGINT			NOT NULL,
	NOMBRE									VARCHAR(50)		NOT NULL,
	PRECIO									DOUBLE			NOT NULL,
	PRIMARY KEY (ID)		
);

CREATE TABLE RESERVATIONS_EXTRAS (
	ID_RESERVATION							BIGINT			NOT NULL,
	ID_EXTRA								BIGINT			NOT NULL,
	FOREIGN KEY (ID_RESERVATION) REFERENCES RESERVATIONS (ID),
	FOREIGN KEY (ID_EXTRA) REFERENCES EXTRAS (ID)
);

